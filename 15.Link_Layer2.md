### Link Layer2
- Ethernet
  - ![Alt text](/img/15-0.png)
    - 현재는 우측의 스위치에 연결시키는 방식이 일반적
  - Ethernet은 CSMA/CD를 사용한다.
    - 그러나, Link Layer는 Feedback이 존재하지 않아서, 라우터가 잘 데이터를 받았는지 알 수가 없다. 근데, 내부적으로 Collision만 없다면 굳이 이것을 받아야할 필요가 없다.
    - 그렇다면 무조건 Collision을 Detect할 수 있어야 한다. 그런데, 혹시라도 Detect 못 할 경우??
      1. ![Alt text](/img/15-1.png)
         - A, B가 Broadcast로 전달하는데, B는 CD를 했는데 A가 이미 B의 Broadcast가 전달한 내용을 받기 직전에 모든 전송을 끝낸 경우. A는 CD할 수 없다.
         - 이는 A가 전송한 내용이 너무 짧기 때문. Minimum Frame Size(64 Bytes)는 최소한 맞춰야 한다.(Propagation Delay등을 고려해 만들어짐)
         - 실제 보내고자 하는 내용이 64Bytes에 못 미친다면, 뒤에 padding을 채워서 64Bytes로 맞춘다.
- MAC addresses and ARP(Address Resolution Protocol)
  - MAC 주소
    - 네트워크 인터페이스 카드에 지정된 주소. (물리 장비에 속한 주소)
    - 48bit 주소공간이고 앞 24비트는 제조 회사의 주소, 뒤 24비트는 해당 기기를 나타내는 주소
    - 네트워크가 바뀐다고 해도 변경되지 않음.
  - Frame 의 헤더 정보
    - Data는 IP 패킷. Header에는 Source, Destination 주소가 들어간다.
    - Source는 Sender의 MAC address, Destination은 다음 홉으로 넘어갈 때의 해당 물리장비의 MAC address
    - 이 때, 맨 첫 라우터, 즉 게이트웨이로 프레임을 보내야 하는데, 해당 이더넷 게이트웨이 주소에 따른 Mac 주소가 ARP 테이블에 담겨있다.
    - 그래서 이를 보고 IP 주소(게이트웨이는 DHCP에 따라 지정됨)에 따라 해당 장비의 MAC 주소를 헤더정보에 담을 수 있게 된다.
  - ARP
    - Link layer의 안에는 ARP Table이 존재한다. 그래서, 이를 통해 장비의 IP address / Mac address를 알아낼 수 있다.
    - ARP call
      - MAC주소를 모를 경우 특정 IP 주소에 대한 MAC 주소를 찾고 있다고 내부 네트워크로 broadcast를 보낸다.
      - 이 broadcast는 ARP message 및 source ip를 보내서 MAC주소를 찾는 방법이다.
    - ARP response
      - 해당 IP주소에 해당하는 장비에서 자신의 MAC 주소를 다시 보내게 된다.
    - 위 과정을 통해서 ARP 테이블이 완성된다. 그를 통해 외부로 나갈 때는 게이트웨이로 향하게 되고, 아닌 경우에는 내부 네트워크의 MAC 주소를 찾아 그 장비로 데이터를 보내게 된다.
    - 이와 같이, IP 주소 --> MAC 주소를 매핑해주는 프로토콜이 ARP