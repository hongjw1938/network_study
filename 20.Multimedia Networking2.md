### Multimedia Networking2
- Voice-over-IP
  - 카카오톡, 스카이프 등등..d
  - Delay에 매우 민감함. 정확하게 전달할 수 있어야 함. File같은 경우는 Delay보다는 일정시간동안 얼마만큼을 보낼 수 있느냐가 중요하다면, Voice 같은 경우는 상호 의사소통을 위해 Delay가 없이 전달하는 것이 중요함
    - 150msec 이하이어야 좋은 의사소통 가능. 400msec이상이면 의사소통 불가
    - talk spurt : 한 사람이 음성 정보 전달 시에 다른 사람은 가만히 있음.
    - 64kbps 정도의 속도로 나가면 문제 없음(기준)
    - 20msec마다 그 데이터가 나가게 됨
  - packet loss
    - 네트워크 계층에서 유실되는 경우
  - delay loss
    - 너무 늦게 도달하는 경우. 사실상 도달해도 의미가 없음
    - jitter(play out delay) : 계속 delay가 변할 수 있으므로 한꺼번에 어느 정도 모았다가 보내게 됨.
    - ![Alt text](/img/20-0.png)
      - 이 경우는 고정된 delay를 주어서 보내는 방식임.
    - Adaptive playout delay
      - ![Alt text](/img/20-1.png)
      - 위 공식에 따라서 Delay를 계산을 하고 네트워크 상태를 관측함.
      - 이에 따라 delay를 조절해서 보내는 방식
      
  - Talk spurt가 시작될 때마다 위와 같이 Delay 방식에 따라 계속 보내게 되는데, 이를 어떻게 Check?
    - Talk spurt가 시작되는 시점을 알아내야 함. Timestamp가 찍혀서 옴.
    - 해당 Timestamp는 첫 packet의 것을 인지함. 그에 더해 Sequence Number가 연속되기 때문에 해당 번호를 기반으로 Talk spurt를 확인할 수 있음
    - Application Header에 해당 내용이 들어 있다.
  - Recovery
    - FEC(forward error collection)
      - ACK/NAK는 하나의 RTT를 보내야하기 때문에 이 방식을 사용
      - N개의 음성데이터를 보낸다고 한다면, 추가적으로 해당 데이터를 XOR한 데이터를 추가로 보내서 하나가 없어도 해당 부가된 데이터를 바탕으로 유실된 데이터가 뭔지 알아낼 수 있게 됨
      - Receiver가 받을 시기에 해당 데이터를 check하고 recovery. 이 방식은 당연히 Overhead가 있음
      - 그래서 lower-quality로 보내서 오버헤드를 줄이는 방식을 택하기도 함
    - 또는 각 패킷을 매우 잘게 쪼개서 보내기도 함
      - ![Alt text](/img/20-2.png)
      - 5밀리초 chuck 4개로 쪼개고 각 패킷이 서로 다른 작은 unit들을 가지게 되어 보내짐. 유실이 되더라도 약간의 loss만 발생할 뿐 전체 communication에는 문제 없음
      - 불필요한 오버헤드가 없음. 그러나 playout delay가 조금 늘어날 수 있음
- Real-Time Protocol(RTP)
  - 멀티미디어 등 Real Time Data에 대해 명세를 하기 위한 프로토콜
  - UDP를 사용해서 UDP위에서 하나의 헤더 정보로 적어서 보냄.
  - 즉, 각 데이터가 어떤 방식으로 Encoding되었는지, Time Sequence정보 , Payload Type등이 적혀 있음
- Network Support for Multimedia
  - 현재 Network는 Multimedia Support하기 위한 내용이 없음. 기본은 TCP/IP로 Data Transaction을 정의해놓은 프로토콜이 기반
  - 그래서 그러한 Support를 하기 위한 방법은 다음과 같음
    - Making Best of effort
      - 현재 TCP/IP방식을 사용하되 대역폭을 높여서 보냄.
    - Differential service
      - Providing Multiple classes of service
      - Class마다 다르게 처리해주는 방식
      - ex) Mixed HTTP and VoIP
        - share 1.5Mpbs link.
        - 이 상황에서 VoIP에 우선권을 주고 싶다면, 패킷에 Marking을 해서 다른 Class임을 명시하여 해당 정보를 기반으로 우선권 부여
    - Per Connection(QoS) Approach
